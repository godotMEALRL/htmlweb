<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0">
	<title>Godot Game</title>
	<style>
		html, body {
			margin: 0;
			padding: 0;
			height: 100%;
			display: flex;
			justify-content: center;
			align-items: center;
			background-color: black;
		}

		#game-container {
			width: 800px;
			height: 600px;
			position: relative;
		}

		#canvas {
			width: 800px;
			height: 600px;
			display: block;
			background-color: black; /* Optional, for visibility */
		}

		#status {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			display: flex;
			justify-content: center;
			align-items: center;
			background-color: rgba(36, 36, 36, 0.8);
			visibility: hidden;
		}
	</style>
</head>
<body>
	<div id="game-container">
		<canvas id="canvas">
			Your browser does not support the canvas tag.
		</canvas>
		<div id="status">
			<img id="status-splash" src="index.png" alt="">
			<progress id="status-progress"></progress>
		</div>
	</div>

	<noscript>
		Your browser does not support JavaScript.
	</noscript>

	<script src="index.js"></script>
	<script>
const GODOT_CONFIG = {
	"canvasResizePolicy": 1, // "Fit" mode
	"args": [],
	"ensureCrossOriginIsolationHeaders": true,
	"executable": "index",
	"fileSizes": {"index.pck": 1790224, "index.wasm": 35376909}
};

const engine = new Engine(GODOT_CONFIG);

(function () {
	const statusOverlay = document.getElementById('status');
	const statusProgress = document.getElementById('status-progress');

	function setStatusMode(mode) {
		statusOverlay.style.visibility = mode === 'hidden' ? 'hidden' : 'visible';
		statusProgress.style.display = mode === 'progress' ? 'block' : 'none';
	}

	engine.startGame({
		'onProgress': function (current, total) {
			if (current > 0 && total > 0) {
				statusProgress.value = current;
				statusProgress.max = total;
			} else {
				statusProgress.removeAttribute('value');
				statusProgress.removeAttribute('max');
			}
		},
	}).then(() => {
		setStatusMode('hidden');
	}, (err) => {
		console.error(err);
		setStatusMode('error');
	});
}());
	</script>
</body>
</html>
